{% extends 'app/layouts/default.html' %}

{% block content %}

{% load crispy_forms_tags %}
<style>
    button {
        padding: 10px 20px;
        border: unset;
        border-radius: 15px;
        color: #000;
        z-index: 1;
        background: #e8e8e8;
        position: relative;
        font-weight: 1000;
        font-size: 17px;
        -webkit-box-shadow: 4px 8px 19px -3px rgba(0, 0, 0, 0.27);
        box-shadow: 4px 8px 19px -3px rgba(0, 0, 0, 0.27);
        transition: all 250ms;
        overflow: hidden;
    }

    button::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 0;
        border-radius: 15px;
        background-color: #212121;
        z-index: -1;
        -webkit-box-shadow: 4px 8px 19px -3px rgba(0, 0, 0, 0.27);
        box-shadow: 4px 8px 19px -3px rgba(0, 0, 0, 0.27);
        transition: all 250ms
    }

    button:hover {
        color: #fff;
        background: #000;
    }

    button:hover::before {
        width: 100%;
    }
</style>

<button onclick="window.location.href='{% url 'add_commune' %}'" class="mb-2"> <i class="fas fa-plus"></i></button>

{% if communes_list %}
{% comment %} {% if messages %}
{% for message in messages %}
<p class="alert alert-success w-100 h-100">{{ message }} </p>
{% endfor %}
{% endif %} {% endcomment %}

{% if messages %}
{% for message in messages %}
<div id="myAlert" class="alert alert-success alert-dismissible" role="alert">
    <i class="fas fa-check-circle me-1"></i>
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}
{% endif %}

<div class="table-responsive">
    <table class="table datatable table-striped table-hover">
        <caption>Liste des communes</caption>
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">PROVINCE</th>
                <th scope="col">COMMUNE</th>
                <th scope="col">ACTIONS</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">
            {% for commune in communes_list %}
            <tr>
                <th scope="row">{{ forloop.counter }}</th>
                <td>{{ commune.province.province }}</td>
                <td>{{ commune.commune }}</td>
                <td>
                    <a href="{% url 'edit_commune' commune.id %}" style="margin-right: 30px;"><i class="fas fa-edit"></i></a>
                    <a href="{% url 'delete_commune' commune.id %}"
                        onclick="return confirm('Voulez-vous vraiment supprimer ?')"><i
                            class="fas fa-trash-alt text-danger"></i></a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


{% else %}
<p class="text-center text-danger" style="font-size: 20px; line-height: 1.5;">PAS DE COMMUNE ENREGISTREE</p>
{% endif %}

<script>

    var alertElement = document.getElementById('myAlert');
    setTimeout(function () {
        alertElement.classList.add('fade');
        alertElement.classList.add('show');
        setTimeout(function () {
            alertElement.remove();
        }, 1500);
    }, 2000);

</script>

{% endblock %}